/* =========================================
   DATA & CONFIG (js/data.js) - FINAL v7
   ========================================= */

const NOTES = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
const NOTES_FLAT = ["C", "Db", "D", "Eb", "E", "F", "Gb", "G", "Ab", "A", "Bb", "B"];

var currentLang = localStorage.getItem('mnotes_lang') || 'en'; 


function t(key) { return TRANSLATIONS[currentLang][key] || key; }

const DEFAULT_DATA = [
  {
    "id": "demo_instruction",
    "title": "Οδηγίες Χρήσης (Demo)",
    "artist": "mNotes Team",
    "key": "C",
    "intro": "",
    "interlude": "",
    "notes": "Διαβάστε παρακάτω για όλες τις δυνατότητες!",
    "playlists": ["Help", "Manual"],
    "body": "Καλωσήρθατε στο mNotes! !ΑmΜια εφαρμογή για τη δημιουργία και χρήση στίχων με συγχορδίες για κιθάρα.\nΣτο περιβάλλον του editor για την εισαγωγή συγχορδίας προηγείται το θαυμαστικό (!) και τελειώνει σε κενό (π.χ. !C ).\n(Το κενό δεν είναι απαραίτητο όταν ο επόμενος χαρακτήρας είναι ελληνικός).\nΟι στροφές διαχωρίζονται με κενή γραμμή.\n\n=====================================\nΟΔΗΓΙΕΣ ΧΡΗΣΗΣ & ΔΥΝΑΤΟΤΗΤΕΣ\n=====================================\n\n1. ΒΙΒΛΙΟΘΗΚΗ\nΗ εφαρμογή δημιουργεί μια βιβλιοθήκη τραγουδιών που παραμένει στη συσκευή σας και μετά το κλείσιμο της εφαρμογής. Εμπλουτίζεται όταν κάνετε εισαγωγή κομματιών.\n\n2. ΠΡΟΣΩΡΙΝΗ ΛΙΣΤΑ (Setlist)\nΜπορείτε να δημιουργείτε Προσωρινή Λίστα (Setlist) για τα Live σας, στην οποία μετακινείτε τα τραγούδια σε όποια σειρά θέλετε (Drag & Drop).\n\n3. ΔΙΑΜΟΙΡΑΣΜΟΣ (Sharing)\n• QR Song (Μέσα στον Editor): Μοιράζεται ΜΟΝΟ το τραγούδι που βλέπετε τώρα.\n• QR Setlist (Στο Tab της Λίστας): Μοιράζεται ΜΟΝΟ τη σειρά των τραγουδιών (IDs) για να συγχρονιστείτε με την μπάντα (προϋποθέτει την ύπαρξη της βιβλιοθήκης στην άλλη συσκευή).\n• Export / Backup:\n  -> Σε PC: Κατεβάζει αρχείο ασφαλείας .mnote.\n  -> Σε Κινητό: Ανοίγει το Viber/WhatsApp/Email για άμεση αποστολή του αρχείου.\n*Προτείνεται να εξάγετε συχνά τη βιβλιοθήκη ώστε να μην τη χάσετε αν απεγκαταστήσετε την εφαρμογή.*\n\n4. ΕΙΣΑΓΩΓΗ (Import)\nΜπορείτε να εισάγετε αρχεία .mnote για τον εμπλουτισμό της βιβλιοθήκης σας, καθώς και αρχεία που ακολουθούν το πρότυπο ChordPro.\n\n5. ΜΟΥΣΙΚΑ ΕΡΓΑΛΕΙΑ\n• Transpose: Αλλάζει τον τόνο του τραγουδιού (-6 έως +6).\n• Capo: Μεταγράφει τις συγχορδίες ώστε να διαβάζονται εύκολα όταν χρησιμοποιείται capo.\n• Smart Capo: Ο αλγόριθμος προτείνει το καλύτερο τάστο για το Capo για να παίξετε με τις πιο εύκολες (ανοιχτές) συγχορδίες.\n• Lyrics Mode: Κρύβει τις συγχορδίες, μεγαλώνει τα γράμματα και ενώνει το κείμενο."
  }
];

// Global Variables Initialization (Safe check)
if (typeof library === 'undefined') var library = [];
if (typeof currentSongId === 'undefined') var currentSongId = null;
if (typeof visiblePlaylist === 'undefined') var visiblePlaylist = [];
if (typeof state === 'undefined') var state = { t: 0, c: 0 };
if (typeof html5QrCodeScanner === 'undefined') var html5QrCodeScanner = null;

console.log("✅ Data & Translations Loaded");
